(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{363:function(s,t,a){s.exports=a.p+"assets/img/1.5b3e3ad2.png"},364:function(s,t,a){s.exports=a.p+"assets/img/2.1c86b37e.png"},365:function(s,t,a){s.exports=a.p+"assets/img/3.bcb4948f.png"},366:function(s,t,a){s.exports=a.p+"assets/img/4.9b228c9f.png"},367:function(s,t,a){s.exports=a.p+"assets/img/5.fa0840fb.png"},368:function(s,t,a){s.exports=a.p+"assets/img/11.761d1e74.png"},369:function(s,t,a){s.exports=a.p+"assets/img/12.cba101c8.png"},370:function(s,t,a){s.exports=a.p+"assets/img/13.84ed30ae.png"},435:function(s,t,a){"use strict";a.r(t);var n=a(42),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"git-commit-规范"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#git-commit-规范"}},[s._v("#")]),s._v(" git commit 规范")]),s._v(" "),n("h2",{attrs:{id:"cz-demo"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#cz-demo"}},[s._v("#")]),s._v(" cz-demo")]),s._v(" "),n("p",[n("strong",[s._v("具体实现过程github地址"),n("a",{attrs:{href:"https://github.com/lyxdream/cz-demo",target:"_blank",rel:"noopener noreferrer"}},[s._v("git-cz+ commitizen + cz-conventional-changelog)(Commitizen: 替代 git commit) + (@commitlint/config-conventional @commitlint/cli)(commit lint 校验规则 ) +husky( commit message 时触发检验规则 )+ conventional-changelog/standard-version(自动生成 CHANGELOG) "),n("OutboundLink")],1)])]),s._v(" "),n("h3",{attrs:{id:"commit-message-作用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#commit-message-作用"}},[s._v("#")]),s._v(" commit message 作用")]),s._v(" "),n("ul",[n("li",[s._v("根据 commit message 自动生成 CHANGELOG.md")]),s._v(" "),n("li",[s._v("基于提交的类型，自动决定语义化的版本变更。")]),s._v(" "),n("li",[s._v("向同事、公众与其他利益关系者传达变化的性质。")]),s._v(" "),n("li",[s._v("触发构建和部署流程。")])]),s._v(" "),n("h3",{attrs:{id:"commit-message-格式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#commit-message-格式"}},[s._v("#")]),s._v(" commit message 格式")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("<type>(<scope>): <subject>\n// 空一行\n\n<body>\n// 空一行\n<footer>\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("大致分为三个部分(使用空行分割):\n标题行:描述主要修改类型和范围以及描述.\nbody: commit 具体修改内容, 描述为什么修改, 做了什么样的修改, 以及开发的思路等等,可以分为多行.\nfooter: 一些备注或修复的 bug 的链接.\n其中 标题行 是必填，body 和 footer 是选填。")]),s._v(" "),n("h4",{attrs:{id:"标题行-包括三个字段-type-必填-、scope-选填-和-subject-必填"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#标题行-包括三个字段-type-必填-、scope-选填-和-subject-必填"}},[s._v("#")]),s._v(" 标题行 包括三个字段：type（必填）、scope（选填）和 subject（必填）")]),s._v(" "),n("p",[s._v("scope: commit 影响的范围, 比如: route, component, utils, build...\nsubject: commit 的概述\n以动词开头，使用第一人称现在时，比如 change，而不是 changed 或 changes\n第一个字母小写\n结尾不加句号（.）")]),s._v(" "),n("p",[s._v("type 用于说明 commit 的类别\ntype 为 feat 和 fix，则该 commit 将肯定出现在 Change log 之中。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("feat：新功能（Features）\nfix: 修改 bug（Bug Fixes）\nperf: 更改代码，以提高性能(Performance Improvements)\nrefactor: 代码重构（重构，在不影响代码内部行为、功能下的代码修改）(Code Refactoring)\ndocs: 文档修改(Documentation)\nstyle: 代码格式修改, 注意不是 css 修改（空白、格式化、缺少分号等）(Styles)\ntest: 测试用例新增、修改（Tests）\nbuild: 影响项目构建或依赖项修改(示例范围：gulp、npm)\nrevert: 恢复上一次提交\nci: 持续集成相关文件修改(示例范围：Travis、Circle、BrowserStack、SauceLabs)（Continuous Integration）\nchore: 构建过程或辅助工具的变动（chore）\nrelease: 发布新版本\nworkflow: 工作流相关文件修改\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("h4",{attrs:{id:"body"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#body"}},[s._v("#")]),s._v(" Body")]),s._v(" "),n("p",[s._v("Body 部分是对本次 commit 的详细描述，可以分成多行。\n有两个注意点。")]),s._v(" "),n("p",[s._v("（1）使用第一人称现在时，比如使用 change 而不是 changed 或 changes。")]),s._v(" "),n("p",[s._v("（2）应该说明代码变动的动机，以及与以前行为的对比。")]),s._v(" "),n("h4",{attrs:{id:"footer"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#footer"}},[s._v("#")]),s._v(" Footer")]),s._v(" "),n("p",[s._v("Footer 部分只用于两种情况。")]),s._v(" "),n("p",[s._v("1）不兼容变动\n如果当前代码与上一个版本不兼容，则 Footer 部分以 BREAKING CHANGE 开头，后面是对变动的描述、以及变动理由和迁移方法。")]),s._v(" "),n("p",[s._v("2）关闭 Issue\n如果当前 commit 针对某个 issue，那么可以在 Footer 部分关闭这个 issue 。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("Closes #234\n也可以一次关闭多个 issue 。\nCloses #123, #245, #992\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("Revert\n还有一种特殊情况，如果当前 commit 用于撤销以前的 commit，则必须以 revert: 开头，后面跟着被撤销 Commit 的 Header。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("revert: feat(pencil): add 'graphiteWidth' option\nThis reverts commit 667ecc1654a317a13331b17617d973392f415f02.\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("此时 Body 部分的格式是固定的，必须写成 This reverts commit <hash>. ，其中的 hash 是被撤销 commit 的 SHA 标识符。\n如果当前 commit 与被撤销的 commit，在同一个发布（release）里面，那么它们都不会出现在 Change log 里面。如果两者在不同的发布，那么当前 commit，会出现在 Change log 的 Reverts 小标题下面。")]),s._v(" "),n("p",[s._v("提示：Commitizen 替代你的 git commit (使用工具生成符合规范的 commit message)\n那么就需要通过 commitizen/cz-cli 工具，我们需要借助它提供的 git cz 命令替代我们之前的 git commit 命令, 帮助我们生成符合规范的 commit message .")]),s._v(" "),n("blockquote",[n("p",[s._v("使用终端工具 (git-cz+ commitizen + cz-conventional-changelog)(Commitizen: 替代 git commit) + (@commitlint/config-conventional @commitlint/cli)(commit lint 校验规则 ) +husky( commit message 时触发检验规则\n)+ conventional-changelog/standard-version(自动生成 CHANGELOG) 一步解决提交信息和版本发布。")])]),s._v(" "),n("h3",{attrs:{id:"工具集示例-包含以下工具类型"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#工具集示例-包含以下工具类型"}},[s._v("#")]),s._v(" 工具集示例，包含以下工具类型：")]),s._v(" "),n("ul",[n("li",[s._v("适配器：用于配置 cz 的提交说明")]),s._v(" "),n("li",[s._v("校验：校验提交说明是否符合规范")]),s._v(" "),n("li",[s._v("日志：根据提交说明的类型快速生成日志")])]),s._v(" "),n("h3",{attrs:{id:"自动生成合格的-commit-message"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#自动生成合格的-commit-message"}},[s._v("#")]),s._v(" 自动生成合格的 commit message")]),s._v(" "),n("p",[s._v("1、全局安装")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("    "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -g git-cz\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("2、 局部安装")]),s._v(" "),n("p",[n("code",[s._v("安装 git-cz 和 commitize、 cz-conventional-changelog")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("  git-cz --save-dev\n "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装commitizen 用于初始化commit的规范")]),s._v("\n "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("  -D commitizen\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用cz-conventional-changelog 规范(默认定义好了一系列规则)")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#初始化项目以使用cz-conventional-changelog适配器")]),s._v("\ncommitizen init cz-conventional-changelog --save-dev --save-exact\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("blockquote",[n("p",[s._v("给命令行小白得一个小贴士：\n如果使用--save-exact 参数，会在 package.json 文件指定安装模块的确切版本。")])]),s._v(" "),n("blockquote",[n("p",[s._v("–save：模块名将被添加到 dependencies，可以简化为参数-S。")])]),s._v(" "),n("blockquote",[n("p",[s._v("–save-dev: 模块名将被添加到 devDependencies，可以简化为参数-D。")])]),s._v(" "),n("p",[s._v("执行上面安装完成后 package.json 中会自动添加以下内容")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"devDependencies"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//...")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"git-cz"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^4.7.1"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"cz-conventional-changelog"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^3.3.0"')]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"config"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"commitizen"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"path"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./node_modules/cz-conventional-changelog"')]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("p",[s._v("3、 自定义配置，新增 "),n("a",{attrs:{href:"https://github.com/lyxdream/cz-demo/blob/main/changelog.config.js",target:"_blank",rel:"noopener noreferrer"}},[s._v("changelog.config.js"),n("OutboundLink")],1)]),s._v(" "),n("blockquote",[n("p",[s._v("changelog 配置，commit 规则也在这里进行配置\n参考文档：https://www.npmjs.com/package/git-cz")])]),s._v(" "),n("p",[s._v("4、使用 git-cz")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"commit"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"git-cz"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("执行 "),n("code",[s._v("npm git-cz")]),s._v(" 或者执行"),n("code",[s._v("npm run commit")]),s._v("\n效果如下\n配置changelog.config.js之前的效果：\n"),n("img",{attrs:{src:a(363),alt:"图片1"}})]),s._v(" "),n("p",[n("img",{attrs:{src:a(364),alt:"图片2"}})]),s._v(" "),n("p",[n("img",{attrs:{src:a(365),alt:"图片3"}})]),s._v(" "),n("p",[s._v("配置changelog.config.js之后的效果：")]),s._v(" "),n("p",[n("img",{attrs:{src:a(366),alt:"图片4"}})]),s._v(" "),n("h3",{attrs:{id:"commit-message-lint-校验"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#commit-message-lint-校验"}},[s._v("#")]),s._v(" commit message lint 校验")]),s._v(" "),n("h4",{attrs:{id:"安装-commit-lint-工具"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装-commit-lint-工具"}},[s._v("#")]),s._v(" 安装 commit lint 工具")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i @commitlint/cli -D\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h4",{attrs:{id:"commit-lint-常用配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#commit-lint-常用配置"}},[s._v("#")]),s._v(" commit lint 常用配置")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i @commitlint/config-conventional -D\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h4",{attrs:{id:"安装-husky-以在-commit-message-时触发检验规则"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装-husky-以在-commit-message-时触发检验规则"}},[s._v("#")]),s._v(" 安装 husky，以在 commit message 时触发检验规则")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i husky\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("执行上面安装完成后 package.json 中会自动添加以下内容")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"devDependencies"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"@commitlint/cli"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^11.0.0"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"@commitlint/config-conventional"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^11.0.0"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"dependencies"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"husky"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^4.3.0"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h4",{attrs:{id:"在项目中新建-commitlint-config-js-文件并设置校验规则"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#在项目中新建-commitlint-config-js-文件并设置校验规则"}},[s._v("#")]),s._v(" 在项目中新建 commitlint.config.js 文件并设置校验规则：")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("module"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// commit lint 校验规则继承")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'@commitlint/config-conventional'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 自定义校验规则")]),s._v("\n    rules"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/** \n feat：新功能（Features）\nfix: 修改 bug（Bug Fixes）\nperf: 更改代码，以提高性能(Performance Improvements)\nrefactor: 代码重构（重构，在不影响代码内部行为、功能下的代码修改）(Code Refactoring)\ndocs: 文档修改(Documentation)\nstyle: 代码格式修改, 注意不是 css 修改（空白、格式化、缺少分号等）(Styles)\ntest: 测试用例新增、修改（Tests）\nbuild: 影响项目构建或依赖项修改(示例范围：gulp、npm)\nrevert: 恢复上一次提交\nci: 持续集成相关文件修改(示例范围：Travis、Circle、BrowserStack、SauceLabs)（Continuous Integration）\nchore: 构建过程或辅助工具的变动（chore）\nrelease: 发布新版本\nworkflow: 工作流相关文件修改\n */")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br")])]),n("h4",{attrs:{id:"配置-husky"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置-husky"}},[s._v("#")]),s._v(" 配置 husky")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"husky"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"hooks"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"commit-msg"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"commitlint -E HUSKY_GIT_PARAMS"')]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),s._v(" "),n("blockquote",[n("p",[s._v('"commit-msg": "commitlint -E HUSKY_GIT_PARAMS" 在 git commit 时执行 commitlint -E HUSKY_GIT_PARAMS 验证 commit 消息。如果不符合定义的格式，将会报错。')])]),s._v(" "),n("p",[s._v("配置完成后，每次 commit 就会进行校验，校验不通过会拦截 commit")]),s._v(" "),n("p",[s._v("运行结果如下:")]),s._v(" "),n("p",[n("img",{attrs:{src:a(367),alt:"图片5"}})]),s._v(" "),n("blockquote",[n("p",[s._v("会发现出现了husky校验")])]),s._v(" "),n("h3",{attrs:{id:"生成-changelog-md"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#生成-changelog-md"}},[s._v("#")]),s._v(" 生成 CHANGELOG.md")]),s._v(" "),n("p",[s._v("1、使用 standard-version 来生成 CHANGELOG.md\n安装使用:")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i -S standard-version\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("执行上面安装完成后 package.json 中会自动添加以下内容")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"dependencies"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"standard-version"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^9.0.0"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("package.json 配置:")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scirpt"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n   ..."),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"release"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"standard-version"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("执行 npm run release 就会生成 CHANGELOG.md")]),s._v(" "),n("p",[s._v("上面命令不会覆盖以前的 Change log，只会在 CHANGELOG.md 的头部加上自从上次发布以来的变动。")]),s._v(" "),n("blockquote",[n("p",[s._v("type 为 feat 和 fix，则该 commit 将肯定出现在 Change log 之中。\nstandard-version 有很多功能，点击查看官方文档: "),n("a",{attrs:{href:"https://www.npmjs.com/package/standard-version",target:"_blank",rel:"noopener noreferrer"}},[s._v("standard-version"),n("OutboundLink")],1)])]),s._v(" "),n("p",[s._v("2、用 conventional-changelog 生成 Change log")]),s._v(" "),n("blockquote",[n("p",[s._v("conventional-changelog 是一款可以根据项目的 commit 和 metadata 信息自动生成 changelogs 和 release notes 的系列工具，并且在辅助 standard-version 工具的情况下，可以自动帮你完成生成 version、打 tag, 生成 CHANGELOG 等系列过程。")])]),s._v(" "),n("h5",{attrs:{id:"conventional-changelog-生态主要模块"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#conventional-changelog-生态主要模块"}},[s._v("#")]),s._v(" conventional-changelog 生态主要模块")]),s._v(" "),n("ul",[n("li",[s._v("conventional-changelog-cli - conventional-changelog 核心命令行工具")]),s._v(" "),n("li",[s._v("standard-changelog - 针对 angular commit 格式的命令行工具")]),s._v(" "),n("li",[s._v("conventional-github-releaser - 利用 git metadata 针对 Github 的发布工具")]),s._v(" "),n("li",[s._v("conventional-commits-detector - commit message 规范引用检测")]),s._v(" "),n("li",[s._v("commitizen - 针对开发者简单的 commit 规范")]),s._v(" "),n("li",[s._v("commitlint - commit Lint 工具")])]),s._v(" "),n("h4",{attrs:{id:"安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -g conventional-changelog-cli\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h4",{attrs:{id:"基本使用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#基本使用"}},[s._v("#")]),s._v(" 基本使用")]),s._v(" "),n("blockquote",[n("p",[s._v("conventional-changelog -p angular -i CHANGELOG.md -s\n上面命令不会覆盖以前的 Change log，只会在 CHANGELOG.md 的头部加上自从上次发布以来的变动。")])]),s._v(" "),n("blockquote",[n("p",[s._v("如果想生成所有发布的 Change log，要改为运行下面的命令。")])]),s._v(" "),n("p",[n("code",[s._v("conventional-changelog -p angular -i CHANGELOG.md -s -r 0")])]),s._v(" "),n("p",[s._v("为了方便使用，可以将其写入 package.json 的 scripts 字段。")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"changelog"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"conventional-changelog -p angular -i CHANGELOG.md -s -r 0"')]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("注意：")]),s._v(" "),n("blockquote",[n("ul",[n("li",[s._v("type 为 feat 和 fix，perf，revert，则该 commit 将肯定出现在 Change log 之中。")]),s._v(" "),n("li",[s._v("type 为 chore,ci,docs,refactor,style,test 加了 BREAKING CHANGES 会进去，不加不进去。")]),s._v(" "),n("li",[s._v("release 不会出现在选择列表里目前没找到原因")])])]),s._v(" "),n("blockquote",[n("p",[s._v("区别：conventional-changelog 我目前没找到变更版本号的地方，standard-version 可以更新版本号的变化。\n如果想测试，演示项目地址："),n("a",{attrs:{href:"https://github.com/lyxdream/cz-demo.git",target:"_blank",rel:"noopener noreferrer"}},[s._v("cz-demo"),n("OutboundLink")],1)])]),s._v(" "),n("p",[s._v("生成的日志可查看示例："),n("a",{attrs:{href:"https://github.com/lyxdream/cz-demo/blob/main/CHANGELOG.md",target:"_blank",rel:"noopener noreferrer"}},[s._v("CHANGELOG"),n("OutboundLink")],1)]),s._v(" "),n("p",[s._v("最后：")]),s._v(" "),n("p",[s._v("参考文章")]),s._v(" "),n("p",[n("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2016/01/commit_message_change_log.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("阮一峰 Commit message 和 Change log 编写指南"),n("OutboundLink")],1)]),s._v(" "),n("p",[n("a",{attrs:{href:"https://my.oschina.net/u/4291707/blog/3315002",target:"_blank",rel:"noopener noreferrer"}},[s._v("如何规范 commit 提交"),n("OutboundLink")],1)]),s._v(" "),n("p",[n("a",{attrs:{href:"https://www.yuque.com/hutao/eusgif/ueqoaf",target:"_blank",rel:"noopener noreferrer"}},[s._v("commit 规范及自动生成 changelog"),n("OutboundLink")],1)]),s._v(" "),n("p",[n("a",{attrs:{href:"https://juejin.im/post/6844904033635794958",target:"_blank",rel:"noopener noreferrer"}},[s._v("git commit 规范及自动检查工具安装小记"),n("OutboundLink")],1)]),s._v(" "),n("h2",{attrs:{id:"customizable-example"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#customizable-example"}},[s._v("#")]),s._v(" customizable-example")]),s._v(" "),n("p",[s._v("采用了cz-customizable定制化提交说明的适配器、commitlint-config-cz @commitlint/cli+husky校验规则以及conventional-changelog日志生成器")]),s._v(" "),n("h3",{attrs:{id:"自定义-adapter"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#自定义-adapter"}},[s._v("#")]),s._v(" 自定义 Adapter")]),s._v(" "),n("blockquote",[n("p",[s._v("有时候angular团队的那套规范会不合适自己团队的要求，这时候就需要定制一套自己的commit规范，cz-customizable是commitizen 的一个 adapter，格式类似上面的 cz-conventional-changelog ，但提供一定程度的自定义。")])]),s._v(" "),n("p",[s._v("1、安装")]),s._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[s._v("```bash\n\nnpm i -g cz-customizable\n//or\nnpm i -D cz-customizable\n")])])]),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('修改 .czrc 或 package.json 中的 config 为:\n```json \n{ "path": "cz-customizable" }\nor\n  "config": {\n    "commitizen": {\n      "path": "node_modules/cz-customizable"\n    }\n  }\n\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("p",[s._v("向 package.json 添加新的 script：")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"commit"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"git-cz"')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[s._v("执行"),n("code",[s._v("npm run commit")]),s._v(" 就可以自动生成合格的 commit message")]),s._v(" "),n("blockquote",[n("p",[s._v("cz-customizable 自定义配置可以对上面的 type、scope、subject、body等进行设置与限定，例如设置type的种类、subject的字数、body的换行符等。\n方法是在项目根目录下新建 "),n("a",{attrs:{href:"./.cz-config.js"}},[s._v(".cz-config.js")]),s._v(" 配置文件，在该文件中对上述字段设置规则。官方github上有给出该文件写法的一个示例。\n官方提供了一个.cz-config.js示例文件"),n("a",{attrs:{href:"https://github.com/leoforfree/cz-customizable/blob/master/cz-config-EXAMPLE.js",target:"_blank",rel:"noopener noreferrer"}},[s._v("cz-config-EXAMPLE.js"),n("OutboundLink")],1),s._v("，")])]),s._v(" "),n("p",[s._v("拓展了几个type类型，并对提示语进行了汉化。最后执行 npm run commit")]),s._v(" "),n("blockquote",[n("p",[s._v("图标可以从找个网站找："),n("a",{attrs:{href:"https://emojipedia.org/objects/",target:"_blank",rel:"noopener noreferrer"}},[s._v("emoji图标"),n("OutboundLink")],1)])]),s._v(" "),n("p",[s._v("运行效果如下：")]),s._v(" "),n("p",[n("img",{attrs:{src:a(368),alt:"图片1"}})]),s._v(" "),n("h3",{attrs:{id:"commitlint-校验你的-message"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#commitlint-校验你的-message"}},[s._v("#")]),s._v(" Commitlint: 校验你的 message")]),s._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[s._v("```bash\n  npm i -D commitlint-config-cz @commitlint/cli\n")])])]),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("> commitlint-config-cz 合并 cz-customizable 的配置 {types,scopes,scopeOverrides} 和 commitlint 的配置 {type-enum,scope-enum}。这样，你就可以在一个地方维护 types 和 scopes。\n\n#### 在项目中新建 commitlint.config.js 文件并设置校验规则：\n```js\nmodule.exports = {\nextends: ['cz'],\nrules: {\n // must add these rules\n 'type-empty': [2, 'never'],\n 'subject-empty': [2, 'never']\n}\n};\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("h4",{attrs:{id:"安装-husky-以在-commit-message-时触发检验规则-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装-husky-以在-commit-message-时触发检验规则-2"}},[s._v("#")]),s._v(" 安装 husky，以在 commit message 时触发检验规则")]),s._v(" "),n("p",[s._v("1、安装husky")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i husky -D\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("2、添加 git commit hooks 到 package.json：")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  ...\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"husky"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"hooks"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"commit-msg"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"commitlint -E HUSKY_GIT_PARAMS"')]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("p",[s._v("执行npm run commit,效果如下：")]),s._v(" "),n("p",[s._v("未配置husky前：")]),s._v(" "),n("p",[n("img",{attrs:{src:a(369),alt:"图片2"}})]),s._v(" "),n("p",[s._v("配置husky之后：")]),s._v(" "),n("p",[n("img",{attrs:{src:a(370),alt:"图片3"}})]),s._v(" "),n("h3",{attrs:{id:"生成-changelog-md-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#生成-changelog-md-2"}},[s._v("#")]),s._v(" 生成 CHANGELOG.md")]),s._v(" "),n("p",[s._v("用 conventional-changelog 生成 Change log")]),s._v(" "),n("blockquote",[n("p",[s._v("conventional-changelog 是一款可以根据项目的 commit 和 metadata 信息自动生成 changelogs 和 release notes 的系列工具，并且在辅助 standard-version 工具的情况下，可以自动帮你完成生成 version、打 tag, 生成 CHANGELOG 等系列过程。")])]),s._v(" "),n("h4",{attrs:{id:"安装-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装-2"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -g conventional-changelog-cli\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h4",{attrs:{id:"基本使用-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#基本使用-2"}},[s._v("#")]),s._v(" 基本使用")]),s._v(" "),n("p",[n("code",[s._v("conventional-changelog -p angular -i CHANGELOG.md -s")])]),s._v(" "),n("blockquote",[n("p",[s._v("上面命令不会覆盖以前的 Change log，只会在 CHANGELOG.md 的头部加上自从上次发布以来的变动。")])]),s._v(" "),n("blockquote",[n("p",[s._v("如果想生成所有发布的 Change log，要改为运行下面的命令。")])]),s._v(" "),n("p",[n("code",[s._v("conventional-changelog -p angular -i CHANGELOG.md -s -r 0")])]),s._v(" "),n("p",[s._v("为了方便使用，可以将其写入 package.json 的 scripts 字段。")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"changelog"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"conventional-changelog -p angular -i CHANGELOG.md -s -r 0"')]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("注意：")]),s._v(" "),n("blockquote",[n("ul",[n("li",[s._v("type 为 feat 和 fix，perf，revert，则该 commit 将肯定出现在 Change log 之中。")]),s._v(" "),n("li",[s._v("type 为 chore,ci,docs,refactor,style,test 加了 BREAKING CHANGES 会进去，不加不进去。")]),s._v(" "),n("li",[s._v("release 不会出现在选择列表里目前没找到原因")])])]),s._v(" "),n("p",[s._v("生成的日志可查看示例："),n("RouterLink",{attrs:{to:"/tool/CHANGELOG.html"}},[s._v("CHANGELOG.md")])],1),s._v(" "),n("h3",{attrs:{id:"扩展"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#扩展"}},[s._v("#")]),s._v(" 扩展：")]),s._v(" "),n("h5",{attrs:{id:"vscode-commitizen"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vscode-commitizen"}},[s._v("#")]),s._v(" vscode commitizen")]),s._v(" "),n("blockquote",[n("p",[s._v("在 VS Code 中搜索装 vscode commitizen，然后就可以摆脱命令行了，而且这个插件是和前面所有的配置兼容的")])]),s._v(" "),n("h5",{attrs:{id:"vue-cli-3-插件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vue-cli-3-插件"}},[s._v("#")]),s._v(" Vue CLI 3 插件")]),s._v(" "),n("blockquote",[n("p",[s._v("如果对于上述所说的配置感到繁琐，这里提供一个Vue CLI 3的插件，如果开发的项目由Vue CLI 3系统生成，可以使用插件@ziyi2/ui-cz一键生成：")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("vue "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" @ziyi2/ui-cz\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("blockquote",[n("p",[s._v("该插件采用了cz-customizable定制化提交说明的适配器、@commitlint/config-conventional校验规则以及conventional-changelog日志生成器。")])]),s._v(" "),n("p",[s._v("最后：")]),s._v(" "),n("p",[s._v("参考文章")]),s._v(" "),n("p",[n("a",{attrs:{href:"https://juejin.im/post/6844903606815064077#heading-10",target:"_blank",rel:"noopener noreferrer"}},[s._v("优雅的提交你的 Git Commit Message"),n("OutboundLink")],1)]),s._v(" "),n("p",[n("a",{attrs:{href:"https://blog.csdn.net/weixin_33890526/article/details/91393527",target:"_blank",rel:"noopener noreferrer"}},[s._v("Cz工具集使用介绍 - 规范Git提交说明"),n("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=e.exports}}]);